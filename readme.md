This is a test project, started with STM32CubeIDE, and added to by TouchGFX Designer. It also contains LCD driver code in main.c, taken from the LIBRARY PROTOTYPE project from EDL.

It could be improved by only updating the portion of the display that is invalidated by changes from TouchGFX.

# Creating A Scratch STMicro Project Using TouchGFX
## Start with an STM32CubeIDE project
1.	Create a new project (File|New|STM32 Project).
2.	For "Commercial Part Number", type in your processor part number ( STM32F722IEK6 ).
3.	Select it from the list on the bottom-right. Click "Next" at the bottom.
4.	Give it a name, uncheck "default location" and browse to a location, and create or select a folder for the project. Select "C++" as the targeted language, as this is what TouchGFX uses.
5.	Click "Finish". This will open the "Pinout & Configuration" view.
6.	Drop down "Software Packs, select "select components".
7.	Scroll down to "STMicroelectronics.X-CUBE-TOUCHGFX" entry1 and expand the tree.
8.	Select "TouchGFX Generator" from the drop-down.
9.	Click OK. This brings you back to the "Pinout & Configuration" view.
10.	Drop-down "Software Packs" near the left side (not to be confused with the drop down of the same name in the blue strip at the top), then click "STMicroelectronics". This reveals more panels.
11.	Check the "Graphics Application" checkbox. This reveals TouchGFX stuff in the Configuration panel.
12.	Note the dependency on CRC. Drop down the "Computing" category towards the left (you may have to slide the panel over to see all the text), click on "CRC", then check "Activated" in the "Mode" panel.
13.	Note that STMicroelectronics.X-CUBE-TOUCHGFX, under "Software Packs", though green, has a red 'x' next to it.
14.	Click on STMicroelectronics.X-CUBE-TOUCHGFX, under "Software Packs", then click on "CRC", under "Computing". This magic combination of clicks gives you the coveted green check next to the STMicroelectronics.X-CUBE-TOUCHGFX, under "Software Packs", without which the IDE will not generate the TouchGFX files and folders.
15.	Click on STMicroelectronics.X-CUBE-TOUCHGFX one more time. In the Touch Generator tab in the "Configuration" panel:
o	Set the width and height for your panel (240x320).
o	Set the pixel format for your color depth.
o	Set the OS. According to any RTOS you might be using.
o	Set single, double or partial buffer, depending on RAM availability.
o	Interface will be custom, for SPI.
16.	On the right panel, click the words "System view". This reveals an "Additional Software" box with a blue rounded box in it that looks like a button but isn’t. This box now has a green check, indicating that it’s ready to generate code.
17.	Under the "Project" menu, click "Generate Code" (for “Open Associated Perspective?”, click yes). This should create the "TouchGFX" folder in the project, visible in the project explorer panel.
(1This assumes this plugin has been installed – how this is done could be reviewed and added)

 
## Add TouchGFX content to the project, using TouchGFX Designer
1.	Open TouchGFX Designer2.
2.	Click the big gray “Open” button at the top.
3.	Browse to your project, then down into the TouchGFX folder.
4.	Select the “ApplicationTemplate.touchgfx.part” file and clock “Open”. This should change the TouchGFX Designer dialog to show a blank box.
5.	On the bottom-left, click “Config”. Select “Display” from the inner vertical tab, then fix the Display orientation to portrait. Select the “Canvas” outer vertical tab. The width and height should now be properly oriented.
6.	Create content and generate code (use of TouchGFX Designer is not covered here). suggested test is to simply create a box shape, expand it to cover the screen, change its color if you like, then place a button in the middle.
7.	To test touch events, add an event handler for the button, have it generate a new virtual function. This will change code in TouchGFX/generated/gui_generated/src/screen_screen/screenViewBase.cpp (assuming the name of the screen was left as “screen”.
8.	Clock the “</>” icon at the bottom-left to generate the code.
9.	In STM32CubeIDE, right-clock on the project and select “refresh” from the drop-down. This will reveal the added files generated by TouchGFX.
(2This assumes that the TouchGFX Designer has been installed in Windows – version 4.20.0)

# Driving LCD Display & Reading Touch Coordinates
How to connect the business "back end" to the generated TouchGFX framework code. 

There are probably better ways of doing this, but this allow at least a demonstration of A) triggering a display update with a change by TouchFGX code and B) triggering a touch input to the TouchGFX framework code from a touch hardware event.

## Display Updates
The display can be updated either as a periodic update, as might be used when doing animation, or triggerd by changes to the screen by TouchGFX code.

This example uses the "end frame" events, from the method TouchGFXHAL::endFrame(), located in Middlewares/ST/touchgfx/framework/include/touchgfx/hal/HAL.hpp.

## Touch Event Handling
For this example, we have set up an interrupt triggered by the high-low transition of the TFT_IRQ line from the LCD display. Overriding the HAL_GPIO_EXTI_Callback() weak function that is called by the interrupt handler, we set a global boolean in main, which reads the touch interface over I2C, and calls the setTouch() TouchGFX function to feed the touch event and coordinates into the TouchGFX framework code. 